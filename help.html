<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pomóż nam - Clicker</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="dog_icon.png">

  <!-- Główny styl ze strony głównej -->
  <style>

#page-loader {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: white;       /* lub Twój kolor tła */
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}

#page-loader.fade-out {
  opacity: 0;
  transition: opacity 0.5s ease;
}

/* Sam spinner – okrąg z obrotową animacją */
.spinner {
  width: 60px;
  height: 60px;
  border: 6px solid rgba(255, 140, 0, 0.2);  /* jasny pomarańcz */
  border-top-color: #ff8c00;                 /* intensywny pomarańcz */
  border-radius: 50%;
  animation: spin 1s infinite linear;
}

/* Definicja keyframes dla obracania */
@keyframes spin {
  to { transform: rotate(360deg); }
}

    /* Global */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Arial', sans-serif;
      line-height: 1.6;
      background-color: #f9f9f9;
      color: #333;
    }
    a { text-decoration: none; }

    /* Navbar */
    .navbar {
      background: #ff8c00;
      padding: 1rem;
      position: sticky;
      top: 0;
      z-index: 100;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .nav-links {
      list-style: none;
      display: flex;
    }
    .nav-links li { margin-right: 1.5rem; }
    .nav-links a {
      color: white;
      font-weight: bold;
      transition: color 0.3s;
    }
    .nav-links a:hover { color: #ffd700; }
    .mobile-menu {
      display: none;
      font-size: 1.5rem;
      color: white;
      cursor: pointer;
    }
    @media (max-width: 768px) {
      .nav-links { display: none; flex-direction: column; width: 100%; }
      .mobile-menu { display: block; }
    }

    /* Hero / Header sekcji clickera */
    .hero {
      text-align: center;
      padding: 2.5rem 1rem;
      background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('pieski-tlo.jpg') no-repeat center/cover;
      color: white;
    }

    /* Clicker Game */
    .game-container {
      background: white;
      max-width: 500px;
      margin: 2rem auto;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      text-align: center;
    }
    .game-container h2 {
      margin-bottom: 1rem;
      color: #ff8c00;
    }
    .animal-card img {
      width: 100%;
      border-radius: 8px;
      margin-bottom: 1rem;
    }
    .scoreboard {
      font-size: 1.5rem;
      margin: 1rem 0;
    }
    #click-btn {
      background: #ff8c00;
      color: white;
      border: none;
      padding: 0.8rem 2rem;
      font-size: 1rem;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.2s;
    }
    #click-btn:hover { background: #e67600; }
    #message {
      margin-top: 1rem;
      font-style: italic;
      color: #555;
    }

    /* Footer */
    footer {
      background: #333;
      color: white;
      padding: 2rem 1rem;
      text-align: center;
      margin-top: 3rem;
    }
    .social-link { color: #ff8c00; margin: 0 0.5rem; }
  </style>
</head>
<body>

  <!-- Nawigacja -->
  <nav class="navbar">

    <div class="mobile-menu">☰</div>
    <ul class="nav-links">
      <li><a href="index.html">Strona główna</a></li>
      <li><a href="about.html">O schronisku</a></li>
      <li><a href="help.html">Help</a></li>
      <li><a href="#contact">Kontakt</a></li>
    </ul>
  </nav>

  <!-- Sekcja nagłówkowa -->
  <header class="hero">
    <h1>Pomóż nam – Gra Clicker</h1>
    <p>Zdobądź punkty opieki i wspieraj naszych podopiecznych!</p>
  </header>

  <!-- Game Container -->
  <section class="game-container">
    <h2>AI Animal Shelter Clicker</h2>
    <div class="animal-card">
      <picture>
        <source type="webp" srcset="https://placekitten.com/400/250.webp">
        <img id="animal-img" src="https://aipetphotos.com/static/media/ah5ngmcv8fdglzxansrc.6c2dff974cff673d3764.webp" alt="Ai dog" loading="lazy">
      </picture>
    </div>
    <div class="scoreboard">
      <span>Punkty Opieki: </span><span id="score">0</span>
    </div>
    <button id="click-btn">Opiekuj się ❤️</button>
    <p id="message">Kliknij, aby zdobyć punkty!</p>
  </section>

  <!-- Stopka -->
  <footer>
    <div class="social-media">
      <a href="https://www.facebook.com/profile.php?id=61574110014886" class="social-link">Facebook</a>
      <a href="https://www.instagram.com/schroniskopsialapa/" class="social-link">Instagram</a>
      <a href="https://www.youtube.com/channel/UCXra0YJRTJaq7_RbEb6xjrw" class="social-link">YouTube</a>
    </div>
    <p>© Schronisko "Psia Łapa"</p>
  </footer>

  <!-- JavaScript -->
  <script>

function preloadBatch(urls, batchSize = 5, delay = 200) {
      let index = 0;
      function loadBatch(deadline) {
        let count = 0;
        while (index < urls.length && count < batchSize && (!deadline || deadline.timeRemaining() > 0)) {
          const img = new Image();
          img.src = urls[index++];
          count++;
        }
        if (index < urls.length) {
          if (window.requestIdleCallback) {
            requestIdleCallback(loadBatch, { timeout: 1000 });
          } else {
            setTimeout(loadBatch, delay);
          }
        }
      }
      if (window.requestIdleCallback) {
        requestIdleCallback(loadBatch);
      } else {
        setTimeout(loadBatch, delay);
      }
    }

    async function findValidDogUrl(baseName) {
      const exts = ['webp', 'jpg', 'png'];
      for (let ext of exts) {
        try {
          await new Promise((res, rej) => {
            const img = new Image();
            img.onload = () => res();
            img.onerror = () => rej();
            img.src = `assets/dogs/${baseName}.${ext}`;
          });
          return `assets/dogs/${baseName}.${ext}`;
        } catch {
          // continue
        }
      }
      return null;
    }

    async function preloadDogImages() {
      const TOTAL = 63;
      const urls = [];
      for (let i = 1; i <= TOTAL; i++) {
        const url = await findValidDogUrl(`dog${i}`);
        if (url) urls.push(url);
      }
      // Shuffle
      for (let i = urls.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [urls[i], urls[j]] = [urls[j], urls[i]];
      }
      return urls;
    }

    (async function startGame() {
      const dogPics = await preloadDogImages();
      // Lazy preload in background
      preloadBatch(dogPics);

      let score = 0, idx = 0;
      const imgEl = document.getElementById('animal-img');
      const scoreEl = document.getElementById('score');
      const msgEl = document.getElementById('message');
      const btn = document.getElementById('click-btn');

      btn.addEventListener('click', () => {
        score++;
        scoreEl.textContent = score;
        if (score === 10) msgEl.textContent = 'Świetnie! 10 punktów!';
        else if (score === 25) msgEl.textContent = 'Super! 25 punktów!';
        else if (score === 50) msgEl.textContent = 'Niesamowite! 50 punktów!';
        else msgEl.textContent = 'Klikaj dalej!';

        if (score % 20 === 0) {
          idx = (idx + 1) % dogPics.length;
          imgEl.src = dogPics[idx];
        }
      });
    })();

  // Mobile menu toggle… (jeśli jeszcze masz)
  document.querySelector('.mobile-menu').addEventListener('click', () => {
    const nav = document.querySelector('.nav-links');
    nav.style.display = nav.style.display==='flex' ? 'none' : 'flex';
  });
  </script>

</body>
</html>
